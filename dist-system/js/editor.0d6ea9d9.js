(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["editor"],{"0539":function(e,t,n){"use strict";var a=n("0e44"),r=n.n(a);r.a},"0e44":function(e,t,n){},"16b7":function(e,t,n){},"19b6":function(e,t,n){},2638:function(e,t,n){"use strict";function a(){return a=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},a.apply(this,arguments)}var r=["attrs","props","domProps"],o=["class","style","directives"],i=["on","nativeOn"],c=function(e){return e.reduce((function(e,t){for(var n in t)if(e[n])if(-1!==r.indexOf(n))e[n]=a({},e[n],t[n]);else if(-1!==o.indexOf(n)){var c=e[n]instanceof Array?e[n]:[e[n]],s=t[n]instanceof Array?t[n]:[t[n]];e[n]=c.concat(s)}else if(-1!==i.indexOf(n))for(var u in t[n])if(e[n][u]){var p=e[n][u]instanceof Array?e[n][u]:[e[n][u]],d=t[n][u]instanceof Array?t[n][u]:[t[n][u]];e[n][u]=p.concat(d)}else e[n][u]=t[n][u];else if("hook"==n)for(var f in t[n])e[n][f]=e[n][f]?l(e[n][f],t[n][f]):t[n][f];else e[n]=t[n];else e[n]=t[n];return e}),{})},l=function(e,t){return function(){e&&e.apply(this,arguments),t&&t.apply(this,arguments)}};e.exports=c},2830:function(e,t,n){"use strict";var a=n("7ee0"),r=n.n(a);r.a},3400:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"header-opt height-100 flex-center-between plr20"},[n("div",{staticClass:"flex items-center cp",on:{click:function(t){return e.$router.push("/")}}},[n("span",{staticClass:"f32 c-fff"},[e._v("Butterfly")]),e._m(0)]),n("div",{staticClass:"flex"},[e._l(e.opts||e.localOpts,(function(t,a){return[n("div",{key:t.label,staticClass:"plr15"},[n("el-button",{attrs:{type:"text"},on:{click:function(e){return t.action()}}},[n("span",{staticClass:"flex-center flex-column"},[n("div",{staticStyle:{height:"20px"}},[n("i",{class:t.icon})]),e._v(" "+e._s(t.label)+" ")])])],1),n("div",{key:a,staticClass:"h30 bg-666 mt10",staticStyle:{width:"2px"}})]})),n("div",{staticClass:"avatar flex-center c-aaa ml20"},[n("div",{staticClass:"avatar-img relative c-fff flex-center",attrs:{"overflow-h":""}},[e._v(" "+e._s(e.name.substr(-2))+" "),e._e()]),e._e()])],2)])},r=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ml10"},[n("img",{attrs:{height:"14px",src:"https://img.shields.io/badge/-beta 0.0.1-lightgrey",alt:""}}),n("p",{staticClass:"c-aaa"},[e._v("快速搭建h5")])])}],o=(n("a4d3"),n("99af"),n("4de4"),n("b0c0"),n("e439"),n("dbb4"),n("b64b"),n("159b"),n("ade3")),i=(n("96cf"),n("1da1")),c=n("8bbf"),l=n.n(c),s=n("8165"),u=n("537d"),p=n("4097"),d=n("5f72"),f=n("7f5d");function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=Object(s["defineComponent"])({props:{opts:Array},setup:function(){var e=l.a.prototype.$native,t=Object(s["ref"])("//filesystem.api.jituancaiyun.net/sfs/avatar?uid="+e.uid),n=[{label:"导入项目",icon:"el-icon-upload f16",action:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d["MessageBox"].prompt("请输入项目英文名称");case 2:if(t=e.sent,n=t.value,n){e.next=6;break}return e.abrupt("return",d["Message"].error("名称不能为空"));case 6:return e.next=8,f["a"].get("project/get",{dir:n});case 8:return a=e.sent,e.next=11,Object(u["c"])(a.data.project);case 11:d["Message"].success("导入成功");case 12:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{label:"同步组件到cdn",icon:"el-icon-refresh-right f16",action:function(){}},{label:"下载项目",icon:"el-icon-download f16",action:function(){}},{label:"发布项目",icon:"el-icon-position f16",action:function(){}},{label:"保存项目",icon:"iconfont icon-save",action:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(u["d"].dir){e.next=2;break}return e.abrupt("return",d["Message"].error("请输入英文名 dir"));case 2:return e.next=4,d["MessageBox"].prompt("请输入改动描述");case 4:if(t=e.sent,n=t.value,n&&!(n.length<5)){e.next=8;break}return e.abrupt("return",d["Message"].error("描述至少5个字"));case 8:return a=function e(t){return f["a"].post("project/save",{dir:u["d"].dir,force:t,project:v({},u["d"],{info:{userName:l.a.prototype.$native.name,remark:n,time:Date.now()}})},{codeCallback:{6001:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d["MessageBox"].confirm("项目已存在，确认覆盖？");case 2:return t.next=4,e(!0);case 4:d["Message"].success("保存成功");case 5:case"end":return t.stop()}}),t)})));function n(){return t.apply(this,arguments)}return n}()}})},e.next=11,a();case 11:d["Message"].success("保存成功");case 12:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{label:"保存本地",icon:"el-icon-finished f16",action:function(){Object(u["b"])(),d["Message"].success("保存成功")}},{label:"预览页面",icon:"el-icon-document-remove f16",action:function(){p["b"].value?window.open("http://api.jituancaiyun.net/butterfly/render.html"+"#/page/".concat(u["d"].dir,"/").concat(p["b"].value.id)):d["Message"].info("请选中一个页面")}},{label:"预览项目",icon:"el-icon-folder-opened f16",action:function(){window.open("http://api.jituancaiyun.net/butterfly/render.html"+"#/project/".concat(u["d"].dir))}}];return{localOpts:n,avatar:t,name:e.name}}}),m=h,y=(n("bde8"),n("2877")),g=Object(y["a"])(m,a,r,!1,null,null,null);t["a"]=g.exports},"392c":function(e,t,n){"use strict";var a=n("16b7"),r=n.n(a);r.a},"40f7":function(e,t,n){"use strict";var a=n("7ff1"),r=n.n(a);r.a},"422d":function(e,t,n){},"42ae":function(e,t,n){},"498a":function(e,t,n){"use strict";var a=n("23e7"),r=n("58a8").trim,o=n("e070");a({target:"String",proto:!0,forced:o("trim")},{trim:function(){return r(this)}})},"547a":function(e,t,n){},"5f58":function(e,t,n){"use strict";var a=n("a369"),r=n.n(a);r.a},"6b57":function(e,t,n){},"7ee0":function(e,t,n){},"7f5d":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n("cc4a");var a=n("38bf"),r=n.n(a),o=n("5f72"),i={self:null,open:function(){this.self||(this.self=o["Loading"].service({background:"transparent"}))},close:function(){this.self&&(this.self.close(),this.self=null)}},c=new r.a({baseUrl:"http://api.jituancaiyun.net",urlMap:{component:{list:"/butterfly/component/:type",update:"/butterfly/component/:type",export:"/butterfly/component/export/:type",download:"/butterfly/component/download/:type"},project:{save:"/butterfly/project/:dir",get:"/butterfly/project/:dir"},delete:"/butterfly/delete/:type/:dir"},notify:o["Message"],loadingMethods:i,contentType:"application/json"})},"7ff1":function(e,t,n){},8811:function(e,t,n){"use strict";var a=n("547a"),r=n.n(a);r.a},"8d39":function(e,t,n){"use strict";var a=n("6b57"),r=n.n(a);r.a},9144:function(e,t,n){"use strict";var a=n("19b6"),r=n.n(a);r.a},"99e0":function(e,t,n){"use strict";var a=n("9cc7"),r=n.n(a);r.a},"9cc7":function(e,t,n){},a15b:function(e,t,n){"use strict";var a=n("23e7"),r=n("44ad"),o=n("fc6a"),i=n("b301"),c=[].join,l=r!=Object,s=i("join",",");a({target:"Array",proto:!0,forced:l||s},{join:function(e){return c.call(o(this),void 0===e?",":e)}})},a369:function(e,t,n){},ab86:function(e,t,n){"use strict";var a=n("422d"),r=n.n(a);r.a},bde8:function(e,t,n){"use strict";var a=n("42ae"),r=n.n(a);r.a},c4a9:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return r}));var a=function(){return"undefined"!==typeof window?window:e},r=function(){var e=a();return e&&e.tinymce?e.tinymce:null}}).call(this,n("c8ba"))},e070:function(e,t,n){var a=n("d039"),r=n("5899"),o="​᠎";e.exports=function(e){return a((function(){return!!r[e]()||o[e]()!=o||r[e].name!==e}))}},f73c:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"editor height-100"},[n("div",{staticClass:"app-header"},[n("header-opt")],1),n("div",{staticClass:"app-header__bar flex-center-between plr20"},[n("el-button",{attrs:{icon:"el-icon-back",type:"text"},on:{click:function(t){return e.$router.push("/project/list")}}},[e._v("返回项目列表")]),n("node-style-tools")],1),n("div",{staticClass:"app-content flex"},[n("div",{staticClass:"app__side-bar"},[n("div",{staticClass:"app__block height-50"},[n("el-tabs",{staticClass:"height-100",attrs:{value:e.tabCurrent.tab1,type:"border-card"},on:{input:function(t){return e.handleClick([t])}}},[n("el-tab-pane",{attrs:{label:"项目设置",name:e.tabName.projectSet}},[n("project-set")],1),n("el-tab-pane",{attrs:{label:"页面列表",name:e.tabName.pageList}},[n("page-list")],1),n("el-tab-pane",{attrs:{label:"节点树",name:e.tabName.nodeTree}},[n("node-tree")],1),n("el-tab-pane",{attrs:{label:"页面模版",name:e.tabName.pageTemplate}},[n("span",[e._v("敬请期待")])])],1)],1),n("div",{staticClass:"app__block height-50"},[n("el-tabs",{staticClass:"height-100",attrs:{value:e.tabCurrent.tab2,type:"border-card"},on:{input:function(t){return e.handleClick(["",t])}}},[n("el-tab-pane",{attrs:{label:"内置组件",name:e.tabName.basicComponent}},[n("basic-component")],1),n("el-tab-pane",{attrs:{label:"封装组件",name:e.tabName.highComponent}},[n("component-compose")],1),n("el-tab-pane",{attrs:{label:"上传组件",name:e.tabName.uploadComponent}},[n("component-upload")],1),n("el-tab-pane",{attrs:{label:"组件库",name:e.tabName.libraryComponent}},[n("component-library")],1),n("el-tab-pane",{attrs:{label:"工具函数",name:e.tabName.fx}},[n("p",[e._v("敬请期待")])])],1)],1)]),n("div",{staticClass:"app__box relative"},[n("el-tabs",{staticClass:"height-100",attrs:{value:e.tabCurrent.tab4,type:"border-card"},on:{input:function(t){return e.handleClick(["","","",t])}}},[n("el-tab-pane",{attrs:{label:"场景预览",name:e.tabName.previewArea}},[n("mobile-render")],1),n("el-tab-pane",{attrs:{label:"代码编辑",name:e.tabName.codeEdit}},[n("code-editor")],1)],1)],1),n("div",{staticClass:"app__config"},[n("div",{staticClass:"app__block height-100"},[n("el-tabs",{staticClass:"height-100",attrs:{value:e.tabCurrent.tab3,type:"border-card"},on:{input:function(t){return e.handleClick(["","",t])}}},[n("el-tab-pane",{attrs:{label:"页面设置",name:e.tabName.pageSet}},[n("page-set")],1),n("el-tab-pane",{attrs:{label:"属性",name:e.tabName.nodeProperty}},[n("node-property")],1),n("el-tab-pane",{attrs:{label:"样式",name:e.tabName.nodeStyle}},[n("node-style")],1),n("el-tab-pane",{attrs:{label:"动画",name:e.tabName.nodeAnimate}},[e._v("敬请期待")])],1)],1)])])])},r=[],o=n("8165"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-set"},[n("schema-form",{attrs:{schema:e.local,"schema-data":e.detail},on:{updateByField:e.updateProjectByField}})],1)},c=[],l=(n("d81d"),n("159b"),n("2638")),s=n.n(l),u=n("8bbf"),p=n.n(u),d=n("5f72"),f=(n("a4d3"),n("4de4"),n("a9e3"),n("e439"),n("dbb4"),n("b64b"),n("ade3")),b=n("7577"),v=Object(o["ref"])(!1);function h(e){v.value=e}var m=Object(o["reactive"])({title:"",code:"",update:function(e){}}),y=function(e,t,n){m.title=e,m.code=t,m.update=n,h(!0)},g=n("6a83"),O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-input",{attrs:{placeholder:e.item.elAttrs&&e.item.elAttrs.placeholder||"请输入",type:e.item.type},on:{blur:function(t){return e.$emit("input",e.local)}},model:{value:e.local,callback:function(t){e.local=t},expression:"local"}})},j=[],w=Object(o["defineComponent"])({name:"local-input",props:{value:String,item:Object},setup:function(e){var t=Object(o["ref"])();return Object(o["watch"])((function(){return e.value}),(function(e){t.value=e})),{local:t}}}),C=w,x=n("2877"),_=Object(x["a"])(C,O,j,!1,null,null,null),k=_.exports;function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){Object(f["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E=function(e,t,n){var a=Object(b["d"])(e.field,t),r=a.pref,i=a.field,c="blur"===e.model,l={attrs:D({placeholder:e.placeholder||"请输入"},e.elAttrs||{},{type:e.type,value:r&&r[i]}),props:D({},e.elProps||{}),on:{input:function(t){n(e.field,t)}}};return c?Object(o["createElement"])(k,{attrs:{value:r&&r[i],item:e},on:{input:function(t){return n(e.field,t)}}}):Object(o["createElement"])("el-input",s()([{},l]))},S=function(e,t,n){var a=Object(b["d"])(e.field,t),r=a.pref,i=a.field;return Object(o["createElement"])("el-select",s()([{},{props:D({},e.elProps,{},e.elAttrs)},{attrs:{value:r[i]}},{on:{change:function(t){n(e.field,t)}}}]),[e.options.map((function(e){return Object(o["createElement"])("el-option",{attrs:{label:e.label,value:e.value}})}))])},$=function(e,t,n,a,r){var i=Object(b["d"])(t.field,n),c=i.pref,l=i.field;if(!c)return null;var s=Object(b["e"])(c[l]),u=s.value,p=s.unit;return Object(o["createElement"])(e,{props:{value:r?Number(u):c[l]},on:{input:function(e){a(t.field,r?e+p:e)}}})},N=function(e,t,n){var a=Object(b["d"])(e.field,t),r=a.pref,i=a.field;return Object(o["createElement"])("el-checkbox",s()([{attrs:{value:r[i]}},{on:{change:function(t){n(e.field,t)}}}]))},I=function(e,t,n){var a=function(){var a=Object(b["d"])(e.field,t),r=a.pref,o=a.field;Object(g["a"])(["","","",g["c"].codeEdit]),y(e.label,r[o],(function(t){n(e.field,t)}))};return Object(o["createElement"])("el-button",{attrs:{type:"text"},on:{click:a}},["编辑代码片段"])},M=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-button",{attrs:{type:"text"},on:{click:e.handleAdd}},[e._v("添加")]),e._l(e.arr,(function(t,a){return n("div",{key:a,staticClass:"flex mb5"},[n("el-input",{staticClass:"mr5",attrs:{placeholder:"key",value:t.name},on:{input:function(n){return e.handleInput(n,"name",t)}}}),n("el-input",{staticClass:"mr5",attrs:{placeholder:"value",value:t.path},on:{input:function(n){return e.handleInput(n,"path",t)}}}),n("el-button",{attrs:{type:"text"},on:{click:function(){return e.handleDel(t,a)}}},[e._v("删除")])],1)}))],2)},A=[],B=(n("a434"),n("b0c0"),n("96cf"),n("1da1")),R=Object(o["createComponent"])({props:{schema:Object,schemaData:Object},setup:function(e,t){var n=Object(o["ref"])([]),a=!1;Object(o["watch"])((function(){return e.schemaData}),function(){var t=Object(B["a"])(regeneratorRuntime.mark((function t(r){var o,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r&&(o=Object(b["d"])(e.schema.field,r),i=o.pref,c=o.field,i[c]&&(a=!0,n.value=Object.keys(i[c]).map((function(e){return{name:e,path:i[c][e]}}))));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());var r=function(){a=!0,p.a.set(n.value,n.value.length,{name:"",path:""})},i=function(e,t){a=!1,n.value.splice(t,1)},c=function(e,t,n){a=!1,n[t]=e};return Object(o["watch"])((function(){return n.value}),(function(e){var n=e.reduce((function(e,t){return t.name&&(e[t.name]=t.path),e}),{});a||t.emit("change",n)}),{deep:!0,lazy:!0}),{arr:n,handleInput:c,handleDel:i,handleAdd:r}}}),F=R,V=Object(x["a"])(F,M,A,!1,null,null,null),z=V.exports,T=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"events-manage f12"},[n("el-button",{attrs:{type:"text"},on:{click:e.handleAdd}},[e._v("添加事件")]),n("ul",e._l(e.eventList,(function(t,a){return n("li",{key:a,staticClass:"flex-center-between"},[n("span",{staticClass:"c-666"},[e._v(e._s(t.desc))]),n("span",[n("i",{staticClass:"el-icon-edit c-blue cp",on:{click:function(n){return e.handleEdit(t,a)}}}),n("i",{staticClass:"el-icon-delete c-main cp",on:{click:function(t){return e.handleDel(a)}}})])])})),0),n("el-dialog",{staticClass:"events-manage-dialog",attrs:{visible:e.showModal,title:"事件管理",width:"900px",top:"0"},on:{"update:visible":function(t){e.showModal=t}}},[n("el-form",{ref:"form",staticStyle:{height:"500px",overflow:"auto"},attrs:{model:e.form,rules:e.rules,"label-position":"left","label-width":"60px"}},[n("el-form-item",{attrs:{label:"描述",prop:"desc"}},[n("el-input",{attrs:{placeholder:"请输入"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),n("el-form-item",{attrs:{label:"类型",prop:"eventType"}},[n("el-select",{model:{value:e.form.eventType,callback:function(t){e.$set(e.form,"eventType",t)},expression:"form.eventType"}},e._l(e.eventTypeOptions,(function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),(e.isFromPage,e._e()),n("el-form-item",{staticClass:"events-btn",attrs:{label:"内置动作",prop:"fx"}},e._l(e.fxList,(function(t,a){return n("el-button",{key:a,attrs:{type:"warning"},on:{click:function(n){return e.handleClickFx(t)}}},[n("i",{staticClass:"iconfont icon-function"}),e._v(" "+e._s(t.name)+" ")])})),1),n("el-form-item",{attrs:{label:"逻辑代码",prop:"fxCode"}},[n("monaco-editor",{ref:"editor",staticStyle:{height:"300px"},attrs:{amdRequire:e.amdRequire,language:"javascript",theme:"vs-dark"},model:{value:e.form.fxCode,callback:function(t){e.$set(e.form,"fxCode",t)},expression:"form.fxCode"}})],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"warning"},on:{click:e.handleConfirm}},[e._v("保 存")]),n("el-button",{on:{click:function(t){e.showModal=!1}}},[e._v("取 消")])],1)],1)],1)},U=[],L=["click","change","input","focus","blur"],q=["onMounted","onUnMounted"],K=[{name:"toast 提示",code:"$$global.toast('提示语')"},{name:"dialog 提示",code:"$$global.dialog('提示语')"},{name:"获取 cookie",code:"$$global.cookie('userId')"},{name:"打点",code:"$$global.dot(/* base */).hit('gid.0.mid.eid')"},{name:"内部跳转",code:"$$global.toPage('/pageId')"},{name:"外部跳转",code:"location.href = 'https://iming.work'"},{name:"接口调用",code:"$$global.http.get('test', {})"},{name:"显示组件",code:"$$global.showNode('nodeId')"},{name:"隐藏组件",code:"$$global.hideNode('nodeId')"},{name:"客户端native",code:"$$global.native"},{name:"客户端右上角菜单",code:"$$global.native.defineCallback('分享', () => {\n})"},{name:"获取节点",code:"$$global.findNodeById('id')"},{name:"设置节点属性",code:"$$global.setNodeProperty('id', '', '')"},{name:"获取节点属性",code:"$$global.getNodeProperty('id', '')"}],H=n("4097"),G=n("a7a1"),J=Object(o["createComponent"])({props:{schema:Object,schemaData:Object,from:{type:String,default:"node"}},setup:function(e,t){var n=Object(o["ref"])([]),a=Object(o["ref"])(!1),r=Object(o["ref"])(-1),i={eventType:"",targetNodeIdPath:[],fxCode:"",desc:""},c=Object(o["computed"])((function(){return"page"===e.from})),l=Object(o["reactive"])(Object(b["a"])(i)),s=Object(o["computed"])((function(){return c.value?q:L}));Object(o["watch"])((function(){return e.schemaData}),(function(t){if(t){var a=Object(b["d"])(e.schema.field,t),r=a.pref,o=a.field;n.value=Object(b["a"])(r[o])}}),{deep:!0});var u=function(){t.refs.form.validate((function(e){e&&(a.value=!1,r.value>-1?n.value[r.value]=Object(b["a"])(l):n.value.push(Object(b["a"])(l)),t.emit("change",n.value),t.refs.form.resetFields())}))},f=function(e){Object.keys(e).forEach((function(t){l[t]=e[t]}))},v=function(e){l.fxCode+="".concat(e.code)};return{showModal:a,form:l,eventList:n,eventTypeOptions:s,isFromPage:c,fxList:K,currentPage:H["b"],rules:{desc:[{required:!0,message:"请输入描述",trigger:"blur"}],eventType:[{required:!0,message:"请选择类型",trigger:"blur"}]},handleConfirm:u,handleAdd:function(){a.value=!0,f(i),c.value||(l.targetNodeIdPath=Object(b["b"])(G["d"].value,H["b"].value.nodes,[]),p.a.nextTick((function(){t.refs.form.clearValidate()})))},handleEdit:function(e,n){a.value=!0,f(e),r.value=n,p.a.nextTick((function(){t.refs.form.clearValidate()}))},handleDel:function(e){d["MessageBox"].confirm("确定要删除吗？").then((function(){n.value.splice(e,1),t.emit("change",n.value)}))},amdRequire:window.require,handleClickFx:v}}}),Q=J,W=(n("99e0"),Object(x["a"])(Q,T,U,!1,null,null,null)),X=W.exports,Y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"unit-size flex"},[n("el-input",{attrs:{placeholder:"请输入",value:e.valueNum},on:{input:e.handleInputNum}}),e.schema.noAuto?e._e():[n("div",{class:e.space}),n("el-select",{attrs:{value:e.valueUnit},on:{change:e.handleInputUnit}},[n("el-option",{attrs:{label:"px",value:"px"}}),n("el-option",{attrs:{label:"%",value:"%"}})],1),n("div",{class:e.space}),n("el-tooltip",{attrs:{effect:"dark",content:"设为auto",placement:"left"}},[n("el-button",{attrs:{icon:"el-icon-circle-close"},on:{click:function(t){return e.handleInputNum("")}}})],1)]],2)},Z=[],ee=(n("498a"),{props:{schema:Object,schemaData:Object,space:{type:String,default:"ml10"}},setup:function(e,t){var n=Object(o["computed"])((function(){var t=Object(b["d"])(e.schema.field,e.schemaData),n=t.pref,a=t.field;return n&&Object(b["e"])(n[a]).unit})),a=Object(o["computed"])((function(){var t=Object(b["d"])(e.schema.field,e.schemaData),n=t.pref,a=t.field;return n&&Object(b["e"])(n[a]).value}));return{valueUnit:n,valueNum:a,handleInputNum:function(e){t.emit("change",""===e.trim()?void 0:(e||0)+n.value)},handleInputUnit:function(e){t.emit("change",""===a.value.trim()?void 0:a.value+e)}}}}),te=ee,ne=Object(x["a"])(te,Y,Z,!1,null,null,null),ae=ne.exports,re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"direction-size"},[n("el-select",{attrs:{value:e.unit,placeholder:"请选择尺寸单位"},on:{change:e.handleInputChange}},[n("el-option",{attrs:{label:"px",value:"px"}}),n("el-option",{attrs:{label:"%",value:"%"}})],1),n("div",{staticClass:"direction-size-box w100 h100 p30 mt10 bd bd-ccc relative",staticStyle:{"border-style":"dashed"}},[n("div",{staticClass:"height-100 width-100 bd bd-ccc",staticStyle:{"border-style":"dashed"}}),n("div",{staticClass:"absolute t0 w30",staticStyle:{left:"35px"}},[n("el-input",{staticClass:"direction-size__input",attrs:{value:e.position.top,placeholder:"上"},on:{input:function(t){return e.handleInput(t,"top")}},nativeOn:{keydown:function(t){return function(t){return e.handleKeycode(t,"top")}(t)}}})],1),n("div",{staticClass:"absolute w30",staticStyle:{left:"-5px",top:"35px"}},[n("el-input",{staticClass:"direction-size__input",attrs:{value:e.position.left,placeholder:"左"},on:{input:function(t){return e.handleInput(t,"left")}},nativeOn:{keydown:function(t){return function(t){return e.handleKeycode(t,"left")}(t)}}})],1),n("div",{staticClass:"absolute w30",staticStyle:{top:"35px",right:"-5px"}},[n("el-input",{staticClass:"direction-size__input",attrs:{value:e.position.right,placeholder:"右"},on:{input:function(t){return e.handleInput(t,"right")}},nativeOn:{keydown:function(t){return function(t){return e.handleKeycode(t,"right")}(t)}}})],1),n("div",{staticClass:"absolute w30 b0",staticStyle:{left:"35px"}},[n("el-input",{staticClass:"direction-size__input",attrs:{value:e.position.bottom,placeholder:"下"},on:{input:function(t){return e.handleInput(t,"bottom")}},nativeOn:{keydown:function(t){return function(t){return e.handleKeycode(t,"bottom")}(t)}}})],1)])],1)},oe=[];n("7db0");function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){Object(f["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var le,se,ue={props:{schema:Object,schemaData:Object},components:{},setup:function(e,t){var n=Object(o["computed"])((function(){var t=Object(b["d"])(e.schema.field,e.schemaData),n=t.pref,a=t.field;return i(n[a]).obj})),a=Object(o["computed"])((function(){var t=Object(b["d"])(e.schema.field,e.schemaData),n=t.pref,a=t.field;return i(n[a]).unit})),r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.value;if(e)return/^\d*.{0,1}\d+$/.test(e)?e+t:e},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={top:void 0,right:void 0,bottom:void 0,left:void 0},n=[];return Object.keys(e).forEach((function(a){var r=Object(b["e"])(e[a]),o=r.unit,i=r.value;t[a]=i,n.push(o)})),{obj:t,unit:n.find((function(e){return"px"!==e}))||"px"}},c=function(e,t){return{top:r(e.top,t),right:r(e.right,t),bottom:r(e.bottom,t),left:r(e.left,t)}},l=function(e,a){t.emit("change",c(ce({},n.value,Object(f["a"])({},a,e))))},s=function(e){t.emit("change",c(n.value,e))},u=function(e,t){var a=38===e.keyCode,r=40===e.keyCode;(a||r)&&(e.preventDefault(),l(a?Number(n.value[t]||0)+1:n.value[t]-1||0,t))};return{position:n,unit:a,handleInput:l,handleInputChange:s,handleKeycode:u}}},pe=ue,de=(n("2830"),Object(x["a"])(pe,re,oe,!1,null,null,null)),fe=de.exports,be=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("editor",{attrs:{value:e.value,init:e.editorOptions,apiKey:"1f4dburbo223re9wxcocxgqhrueu0424ae4dnnfm6b8m4mgj"},on:{onChange:e.handleChange}})},ve=[],he=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],me=function(e){return-1!==he.indexOf(e)},ye=function(e,t,n){Object.keys(t).filter(me).forEach((function(a){var r=t[a];"function"===typeof r&&("onInit"===a?r(e,n):n.on(a.substring(2),(function(e){return r(e,n)})))}))},ge=function(e,t){var n=e.$props.modelEvents?e.$props.modelEvents:null,a=Array.isArray(n)?n.join(" "):n;e.$watch("value",(function(e,n){t&&"string"===typeof e&&e!==n&&e!==t.getContent()&&t.setContent(e)})),t.on(a||"change keyup undo redo",(function(){e.$emit("input",t.getContent({format:e.$props.outputFormat}))}))},Oe=function(e,t,n){var a=t.$props.value?t.$props.value:"",r=t.$props.initialValue?t.$props.initialValue:"";n.setContent(a||r),t.$listeners.input&&ge(t,n),ye(e,t.$listeners,n)},je=0,we=function(e){var t=Date.now(),n=Math.floor(1e9*Math.random());return je++,e+"_"+n+je+String(t)},Ce=function(e){return null!==e&&"textarea"===e.tagName.toLowerCase()},xe=function(e){return"undefined"===typeof e||""===e?[]:Array.isArray(e)?e:e.split(" ")},_e=function(e,t){return xe(e).concat(xe(t))},ke=function(e){return null===e||void 0===e},Pe=function(){return{listeners:[],scriptId:we("tiny-script"),scriptLoaded:!1}},De=function(){var e=Pe(),t=function(e,t,n,a){var r=t.createElement("script");r.referrerPolicy="origin",r.type="application/javascript",r.id=e,r.src=n;var o=function(){r.removeEventListener("load",o),a()};r.addEventListener("load",o),t.head&&t.head.appendChild(r)},n=function(n,a,r){e.scriptLoaded?r():(e.listeners.push(r),n.getElementById(e.scriptId)||t(e.scriptId,n,a,(function(){e.listeners.forEach((function(e){return e()})),e.scriptLoaded=!0})))},a=function(){e=Pe()};return{load:n,reinitialize:a}},Ee=De(),Se=n("c4a9"),$e={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],value:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(e){return"html"===e||"text"===e}}},Ne=function(){return Ne=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Ne.apply(this,arguments)},Ie=function(e,t,n){return e(n||"div",{attrs:{id:t}})},Me=function(e,t){return e("textarea",{attrs:{id:t},style:{visibility:"hidden"}})},Ae=function(e){return function(){var t=Ne(Ne({},e.$props.init),{readonly:e.$props.disabled,selector:"#"+e.elementId,plugins:_e(e.$props.init&&e.$props.init.plugins,e.$props.plugins),toolbar:e.$props.toolbar||e.$props.init&&e.$props.init.toolbar,inline:e.inlineEditor,setup:function(t){e.editor=t,t.on("init",(function(n){return Oe(n,e,t)})),e.$props.init&&"function"===typeof e.$props.init.setup&&e.$props.init.setup(t)}});Ce(e.element)&&(e.element.style.visibility=""),Object(Se["a"])().init(t)}},Be={props:$e,created:function(){this.elementId=this.$props.id||we("tiny-vue"),this.inlineEditor=this.$props.init&&this.$props.init.inline||this.$props.inline},watch:{disabled:function(){this.editor.setMode(this.disabled?"readonly":"design")}},mounted:function(){if(this.element=this.$el,null!==Object(Se["a"])())Ae(this)();else if(this.element&&this.element.ownerDocument){var e=this.$props.cloudChannel?this.$props.cloudChannel:"5",t=this.$props.apiKey?this.$props.apiKey:"no-api-key",n=ke(this.$props.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/"+t+"/tinymce/"+e+"/tinymce.min.js":this.$props.tinymceScriptSrc;Ee.load(this.element.ownerDocument,n,Ae(this))}},beforeDestroy:function(){null!==Object(Se["a"])()&&Object(Se["a"])().remove(this.editor)},render:function(e){return this.inlineEditor?Ie(e,this.elementId,this.$props.tagName):Me(e,this.elementId)}},Re=Be,Fe={props:{schema:Object,schemaData:Object},components:{Editor:Re},setup:function(e,t){var n=Object(o["computed"])((function(){var t=Object(b["d"])(e.schema.field,e.schemaData),n=t.pref,a=t.field;if(n&&n[a])return tinymce&&tinymce.activeEditor&&tinymce.activeEditor.setContent(n[a]),n[a]})),a=function(e,n){e.originalEvent&&e.originalEvent.is_removing?console.log("removing rich text editor"):t.emit("change",n.getContent())};return{value:n,handleChange:a,editorOptions:{height:500,menubar:!1,language:"zh_CN",language_url:"/tinymce/langs/zh_CN.js",fontsize_formats:"11px 12px 14px 16px 18px 24px 36px 48px",plugins:["advlist autolink lists link image charmap","searchreplace visualblocks code fullscreen","print preview anchor insertdatetime media","paste code help wordcount table"],toolbar:["forecolor backcolor bold italic underline strikethrough","fontsizeselect formatselect","undo redo numlist bullist link preview","outdent indent alignleft aligncenter alignright alignjustify fullscreen"]}}}},Ve=Fe,ze=(n("40f7"),Object(x["a"])(Ve,be,ve,!1,null,null,null)),Te=ze.exports,Ue=Object(o["defineComponent"])({props:{schema:Array,schemaData:Object,from:String},setup:function(e,t){var n=function(e,n){t.emit("updateByField",e,n)},a=function(t){var n=!0;return t.relation&&(n=t.relation.every((function(t){return e.schemaData[t.field]===t.value}))),!1===n?null:t.block?Object(o["createElement"])("div",[Object(o["createElement"])("p",{class:"c-666 mb10"},[t.label]),i(t)]):Object(o["createElement"])("el-form-item",{key:t.field,attrs:{label:t.label},scopedSlots:{label:function(){return Object(o["createElement"])("span",{on:{click:function(){t.info&&d["MessageBox"].alert(t.info)}}},[t.label,t.info&&Object(o["createElement"])("i",{class:t["info-icon"]})])}}},[i(t)])},r=function(t,a){return Object(o["createElement"])(t,{props:{schema:a,schemaData:e.schemaData,from:e.from},on:{change:function(e){n(a.field,Object(o["reactive"])(e))}}})},i=function(t){switch(t.type){case"input":case"textarea":return E(t,e.schemaData,n);case"select":return S(t,e.schemaData,n);case"checkbox":return N(t,e.schemaData,n);case"slider":return $("el-slider",t,e.schemaData,n,!0);case"color":return $("el-color-picker",t,e.schemaData,n);case"input-group":return r(z,t);case"unit-size":return r(ae,t);case"direction-size":return r(fe,t);case"rich-text":return r(Te,t);case"events":return r(X,t);case"code":return I(t,e.schemaData,n);default:return Object(o["createElement"])("p")}},c=Object(o["reactive"])({props:{model:e.schemaData,rules:{},"label-width":"80px","label-position":"left"},ref:"form"});return Object(o["watch"])((function(){return e.schema}),(function(e){var t={};e.forEach((function(e){e.rules&&(t[e.field]=e.rules)})),p.a.set(c.props,"rules",t)})),Object(o["watch"])((function(){return e.schemaData}),(function(e){c.props.model=e})),function(){return Object(o["createElement"])("div",{class:"schema-form"},[Object(o["createElement"])("el-form",s()([{},c]),[e.schema.map(a)])])}}}),Le=Ue,qe=(n("9144"),Object(x["a"])(Le,le,se,!1,null,null,null)),Ke=qe.exports,He=[{label:"项目描述",field:"desc",type:"input",elProps:{},elAttrs:{rows:2},rulers:[{required:!0,message:"请输入项目名称",trigger:"blur"},{min:3,max:500,message:"长度在 3 到 500 个字符",trigger:"blur"}],model:"blur"},{label:"英文名称",field:"dir",type:"input",rulers:[{required:!0,message:"请输入项目目录名称",trigger:"blur"}],elAttrs:{disabled:!1}},{label:"页面类型",field:"interactiveType",type:"select",options:[{label:"长页面",value:"long-page"},{label:"滑动海报",value:"poster"}],elAttrs:{disabled:!0}},{label:"封面图",field:"thumbCover",type:"input"},{label:"开发环境",field:"config.dev",type:"input-group","info-icon":"el-icon-warning-outline",info:"开发环境用到的变量键值对，使用: $$global.config.baseUrl"},{label:"正式环境",field:"config.pro",type:"input-group","info-icon":"el-icon-warning-outline",info:"正式环境用到的变量键值对，使用: $$global.config.baseUrl"},{label:"baseUrl",field:"httpOptions.baseUrl",type:"input"},{label:"contentType",field:"httpOptions.contentType",type:"select",options:[{label:"json",value:"application/json"},{label:"x-www-form-urlencoded",value:"application/x-www-form-urlencoded"}]},{label:"urlMap",field:"httpOptions.urlMap",type:"input-group"},{label:"Http选项",field:"httpOptions.options",block:!1,type:"code","info-icon":"el-icon-warning-outline",info:"上面的字段如果不够用，可以在这里补充其它选项。"},{label:"项目常量",field:"constant",block:!1,type:"code","info-icon":"el-icon-warning-outline",info:"使用方法：在项目全局中任何地方，例如：$$global.constant.[fieldName]"},{label:"项目白名单",field:"info.whitelist",type:"textarea"}],Ge=n("537d"),Je=Object(o["defineComponent"])({components:{SchemaForm:Ke},setup:function(e,t){return He[1].elAttrs.disabled=!!t.root.$route.params.dir,{local:He,detail:Ge["d"],updateProjectByField:function(e,t){Object(b["h"])(Ge["d"],e,t)}}}}),Qe=Je,We=Object(x["a"])(Qe,i,c,!1,null,null,null),Xe=We.exports,Ye=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-list"},[e._l(e.project.pages,(function(t){return n("div",{key:t.id,staticClass:"page-list__item flex items-center c-999 relative pl15 cp",class:{active:e.selected&&e.selected.id===t.id},on:{click:function(n){return e.setSelect(t)}}},[n("span",[e._v(e._s(t.title||t.id))])])})),n("div",{staticClass:"page-list__item flex-center c-999 cp",on:{click:e.addPage}},[n("i",{staticClass:"el-icon-plus f14"}),n("span",[e._v("新建空白页面")])])],2)},Ze=[],et=Object(o["createComponent"])({components:{},setup:function(){return{project:Ge["d"],selected:H["b"],setSelect:function(e){Object(g["a"])(["","",g["c"].pageSet]),Object(H["d"])(e),h(!1),Object(g["a"])(["","","",g["c"].previewArea])},addPage:function(e){Object(H["a"])(e),Object(g["a"])(["","",g["c"].pageSet])}}}}),tt=et,nt=(n("392c"),Object(x["a"])(tt,Ye,Ze,!1,null,null,null)),at=nt.exports,rt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-set"},[e.isEdit()?e.showSchema?[n("schema-form",{attrs:{schema:e.local,"schema-data":e.currentPage,from:"page"},on:{updateByField:e.updatePageByField}}),n("div",{staticClass:"tc"},[n("el-button",{staticClass:"width-100",attrs:{type:"danger"},on:{click:e.handleDel}},[e._v("删除页面")])],1)]:n("div",{staticClass:"flex-center p30"},[n("p",{staticClass:"c-999"},[e._v("请新建页面")])]):n("div",{staticClass:"flex-center p30"},[n("p",{staticClass:"c-999"},[e._v("请切换为编辑模式")])])],2)},ot=[],it=[{label:"ID",field:"id",type:"input",elProps:{},elAttrs:{disabled:!1}},{label:"标题",field:"title",type:"input",elProps:{},elAttrs:{}},{label:"class",field:"className",type:"textarea",elProps:{},elAttrs:{placeholder:"支持 tcon.css，空格分隔"},model:"blur"},{label:"开启分享",field:"hasShare",type:"checkbox"},{label:"分享标题",field:"share.title",type:"input",relation:[{field:"hasShare",value:!0}]},{label:"分享描述",field:"share.desc",type:"input",relation:[{field:"hasShare",value:!0}]},{label:"分享图片",field:"share.pic",type:"input",relation:[{field:"hasShare",value:!0}]},{label:"分享地址",field:"share.link",type:"input",relation:[{field:"hasShare",value:!0}]},{label:"事件管理",field:"events",type:"events"},{label:"视图模型",field:"state",block:!1,type:"code","info-icon":"el-icon-warning-outline",info:"使用方法：在当前页面组件属性的输入框内可以绑定字段，例如：$state.test"}],ct=n("c951"),lt=Object(o["createComponent"])({components:{SchemaForm:Ke},setup:function(){var e=Object(o["computed"])((function(){return!!H["b"].value}));return{local:it,isEdit:ct["a"],showSchema:e,currentPage:H["b"],updatePageByField:function(e,t){Object(b["h"])(H["b"].value,e,t)},handleDel:function(){var e=Object(B["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d["MessageBox"].confirm("确定要删除页面吗");case 2:Object(H["c"])({pageId:H["b"].value.id});case 3:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}}}),st=lt,ut=Object(x["a"])(st,rt,ot,!1,null,null,null),pt=ut.exports,dt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"node-tree"},[e.currentPage?[n("p",{staticClass:"cp node-tree__root",style:{background:e.currentNode&&"-1"!==e.currentNode.id?void 0:"#f0f7ff"},on:{click:function(t){return e.handleNodeClick(e.rootNode)}}},[e._v(e._s(e.rootNode.title))]),n("el-tree",{ref:"tree",attrs:{data:e.currentPage.nodes,props:e.defaultProps,"allow-drop":e.allowDrop,"allow-drag":e.allowDrag,"expand-on-click-node":!1,"node-key":"id","default-expand-all":"","highlight-current":"",draggable:""},on:{"node-click":e.handleNodeClick,"node-drop":e.handleDrop},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.node,r=t.data;return n("div",{staticClass:"flex-center-between width-100"},[n("span",[e._v(e._s(a.label))]),"-1"!==r.id?n("div",{on:{click:function(e){e.stopPropagation()}}},[n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.handleDel(r,a.parent)}}},[n("span",{staticStyle:{color:"red"}},[e._v("删除")])]),n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.handleCopy(r,a.parent)}}},[e._v(" 复制 ")]),"div"===r.type?n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.handleExport(r,a.parent)}}},[e._v(" 封装组件 ")]):e._e()],1):e._e()])}}],null,!1,2750750657)})]:n("div",{staticClass:"flex-center p30"},[n("p",{staticClass:"c-999"},[e._v("请选中一个页面")])])],2)},ft=[],bt=(n("c740"),n("7f5d")),vt=Object(o["createComponent"])({setup:function(e,t){Object(o["watch"])((function(){return G["d"].value&&G["d"].value.id}),(function(e){t.refs.tree.setCurrentKey("-1"===e?null:e)}),{lazy:!0});var n=function(e){Object(G["h"])(e)},a=function(e,t){var n=t.data.children.findIndex((function(t){return t.id===e.id})),a=t.data.children;"-1"===t.data.id&&(a=H["b"].value.nodes),a.splice(n+1,0,Object(G["e"])(e))},r=function(e){Object(G["f"])({nodeId:e.id})},i=function(e,t){d["MessageBox"].prompt("请输入封装的组件名、字母数字组成").then((function(t){var n=t.value,a=[],r=function e(t){if(1===t.nodeType){var n=Ge["d"].componentDownload.find((function(e){return e.name===t.name}));n&&a.push(n)}t.children&&t.children.forEach((function(t){e(t)}))};r(e),bt["a"].post("component/export",{type:"compose",componentDeps:a,name:n,node:e},{successMessage:"封装成功！"})}))};return{currentPage:H["b"],currentNode:G["d"],rootNode:G["g"],defaultProps:{children:"children",label:"title"},handleDrop:function(e,t,n,a){console.log("tree drop: ",t,n)},allowDrop:function(e,t,n){var a=t.data,r=a.id,o=a.type;return"-1"!==r&&("div"!==o&&"inner"!==n||"div"===o)},allowDrag:function(e){return"-1"!==e.data.id},handleNodeClick:n,handleDel:r,handleCopy:a,handleExport:i}}}),ht=vt,mt=(n("8d39"),Object(x["a"])(ht,dt,ft,!1,null,null,null)),yt=mt.exports,gt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"node-style"},[e.isEdit()?e.currentNode&&"-1"!==e.currentNode.id?n("schema-form",{attrs:{schema:e.schema,"schema-data":e.currentNode},on:{updateByField:e.updateNodeByField}}):n("div",{staticClass:"flex-center p30"},[n("p",{staticClass:"c-999"},[e._v("请选中非根组件")])]):n("div",{staticClass:"flex-center p30"},[n("p",{staticClass:"c-999"},[e._v("请切换为编辑模式")])])],1)},Ot=[],jt=[{label:"宽度",field:"style.width",type:"unit-size"},{label:"高度",field:"style.height",type:"unit-size"},{label:"脱离文档流",field:"style.positionType",type:"select",options:[{label:"absolute",value:"absolute"},{label:"fixed",value:"fixed"}],relation:[{field:"outDocFlow",value:!0}]},{label:"位置",field:"style.position",type:"direction-size",relation:[{field:"outDocFlow",value:!0}]},{label:"外边距",field:"style.margin",type:"direction-size"},{label:"内边距",field:"style.padding",type:"direction-size"},{label:"背景颜色",field:"style.backgroundColor",type:"color"},{label:"背景图片",field:"style.backgroundImage",type:"input",placeholder:"请输入图片地址"},{label:"背景位置",field:"style.backgroundPosition",type:"select",options:[{label:"-",value:""},{label:"center",value:"center"},{label:"left top",value:"left top"},{label:"left center",value:"left center"}],props:{filterable:!0,"allow-create":!0,clearable:!0}},{label:"背景尺寸",field:"style.backgroundSize",type:"select",options:[{label:"-",value:""},{label:"cover",value:"cover"},{label:"contain",value:"contain"},{label:"100%",value:"100%"},{label:"100% 100%",value:"100% 100%"}],props:{filterable:!0,"allow-create":!0,clearable:!0}},{label:"背景重复",field:"style.backgroundRepeat",type:"select",options:[{label:"-",value:""},{label:"no-repeat",value:"no-repeat"},{label:"repeat-x",value:"repeat-x"},{label:"repeat-y",value:"repeat-y"}],props:{filterable:!0,"allow-create":!0,clearable:!0}},{label:"边框",field:"style.border",type:"direction-size"},{label:"边框样式",field:"style.borderStyle",type:"select",options:[{label:"-",value:""},{label:"实线",value:"solid"},{label:"虚线",value:"dashed"},{label:"小圆点",value:"dotted"}]},{label:"边框颜色",field:"style.borderColor",type:"color"},{label:"圆角",field:"style.borderRadius",type:"slider"},{label:"样式补充",field:"style.code",type:"code"}],wt=(n("a15b"),n("ac1f"),n("1276"),[{id:1,title:"上对齐",icon:"icon-align-top"},{id:2,title:"右对齐",icon:"icon-align-right"},{id:3,title:"下对齐",icon:"icon-align-bottom"},{id:5,title:"垂直居中",icon:"icon-align-center"},{id:4,title:"左对齐",icon:"icon-align-left"},{id:6,title:"水平居中",icon:"icon-align-middle"},{id:7,title:"横向填充",icon:"icon-full-width"},{id:8,title:"横向1/2填充",icon:"icon-half-width"},{id:9,title:"纵向填充",icon:"icon-full-height"},{id:10,title:"纵向1/2填充",icon:"icon-half-height"}]),Ct=function(e,t){var n=e.split(" "),a=n.findIndex((function(e){return"center"===e})),r=n.findIndex((function(e){return"center-h"===e})),o=n.findIndex((function(e){return"center-v"===e}));return a>-1?(n.splice(a,1),n.push(t)):"center-v"===t?r>-1?(n.splice(r,1),n.push("center")):-1===o&&n.push(t):"center-h"===t&&(o>-1?(n.splice(o,1),n.push("center")):-1===r&&n.push(t)),n.join(" ")},xt=function(e){var t=e.split(" "),n=t.findIndex((function(e){return"center"===e})),a=t.findIndex((function(e){return"center-h"===e})),r=t.findIndex((function(e){return"center-v"===e}));return n>-1&&t.splice(n,1),a>-1&&t.splice(a,1),r>-1&&t.splice(r,1),t.join(" ")},_t={components:{SchemaForm:Ke},setup:function(){return{schema:jt,isEdit:ct["a"],currentNode:G["d"],updateNodeByField:function(e,t){"style.position"===e&&Object(b["h"])(G["d"].value,"className",xt(G["d"].value.className)),Object(b["h"])(G["d"].value,e,t)}}}},kt=_t,Pt=Object(x["a"])(kt,gt,Ot,!1,null,null,null),Dt=Pt.exports,Et=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"node-style-tools"},[e.isEdit()?e._e():n("div",{staticClass:"flex-center p30"})])},St=[];n("fb6a");function $t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$t(Object(n),!0).forEach((function(t){Object(f["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var It={setup:function(){var e=Object(o["computed"])((function(){return G["d"].value?G["d"].value.outDocFlow?wt:wt.slice(4):[]})),t=function(e){switch(e.id){case 1:G["d"].value&&Object(b["h"])(G["d"].value,"style.position",Nt({},G["d"].value.style.position||{},{top:0,bottom:void 0}));break;case 2:G["d"].value&&Object(b["h"])(G["d"].value,"style.position",Nt({},G["d"].value.style.position||{},{right:0,left:void 0}));break;case 3:G["d"].value&&Object(b["h"])(G["d"].value,"style.position",Nt({},G["d"].value.style.position||{},{bottom:0,top:void 0}));break;case 4:if(G["d"].value){var t=G["d"].value.outDocFlow?Nt({},G["d"].value.style.position||{},{left:0,right:void 0}):Nt({},G["d"].value.style.margin||{},{left:"",right:""});Object(b["h"])(G["d"].value,G["d"].value.outDocFlow?"style.position":"style.margin",t)}break;case 5:G["d"].value&&(Object(b["h"])(G["d"].value,"style.position",{}),Object(b["h"])(G["d"].value,"className",Ct(G["d"].value.className,"center-v")));break;case 6:G["d"].value&&(G["d"].value.outDocFlow?(Object(b["h"])(G["d"].value,"style.position",{}),Object(b["h"])(G["d"].value,"className",Ct(G["d"].value.className,"center-h"))):Object(b["h"])(G["d"].value,"style.margin",Nt({},G["d"].value.style.margin||{},{left:"auto",right:"auto"})));break;case 7:Object(b["h"])(G["d"].value,"style.width","100%");break;case 8:Object(b["h"])(G["d"].value,"style.width","50%");break;case 9:Object(b["h"])(G["d"].value,"style.height","100%");break;case 10:Object(b["h"])(G["d"].value,"style.height","50%");break}};return{list:e,isEdit:ct["a"],handleClick:t}}},Mt=It,At=(n("8811"),Object(x["a"])(Mt,Et,St,!1,null,null,null)),Bt=At.exports,Rt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"node-property"},[e.isEdit()?e.currentNode&&"-1"!==e.currentNode.id?[n("schema-form",{attrs:{schema:e.schema,"schema-data":e.currentNode},on:{updateByField:e.updateNodeByField}}),n("div",{staticClass:"tc mt20"},[n("el-button",{staticClass:"width-100",attrs:{type:"danger"},on:{click:e.handleDel}},[e._v("删除节点")])],1)]:n("div",{staticClass:"flex-center p30"},[n("p",{staticClass:"c-999"},[e._v("请选中非根节点")])]):n("div",{staticClass:"flex-center p30"},[n("p",{staticClass:"c-999"},[e._v("请切换为编辑模式")])])],2)},Ft=[];n("99af");function Vt(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}n("e01a"),n("d28b"),n("a630"),n("e260"),n("d3b7"),n("25f0"),n("3ca3"),n("ddb0");function zt(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function Tt(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function Ut(e){return Vt(e)||zt(e)||Tt()}var Lt=[{label:"ID",field:"id",type:"input",elProps:{},elAttrs:{readonly:!0}},{label:"class",field:"className",type:"textarea",elProps:{},elAttrs:{placeholder:"支持 tcon.css，空格分隔"},model:"blur"},{label:"节点名称",field:"title",type:"input",elProps:{},elAttrs:{},model:"blur"},{label:"显示",field:"show",type:"checkbox"},{label:"v-if",field:"vIf",type:"input",elAttrs:{placeholder:"请输入"},model:"blur"},{label:"脱离文档流",field:"outDocFlow",type:"checkbox"},{label:"事件管理",field:"events",type:"events"}];function qt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Kt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qt(Object(n),!0).forEach((function(t){Object(f["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ht={components:{SchemaForm:Ke},setup:function(){var e=Object(o["computed"])((function(){var e=G["d"].value;if(e&&"-1"!==e.id){var t=[];return 1===e.nodeType?t=window[e.name].schema.map((function(e){return Kt({},e,{model:"input"===e.type?"blur":"input"})})):4===e.nodeType&&(t=[{label:"render",field:"renderString",block:!1,type:"code"}]),[].concat(Ut(Lt),Ut(t))}return[]}));return{schema:e,currentNode:G["d"],isEdit:ct["a"],updateNodeByField:function(e,t){Object(b["h"])(G["d"].value,e,t)},handleDel:function(){Object(G["f"])({nodeId:G["d"].value.id})}}}},Gt=Ht,Jt=Object(x["a"])(Gt,Rt,Ft,!1,null,null,null),Qt=Jt.exports,Wt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"basic-component"},[n("div",[n("el-button",{attrs:{type:"text",icon:"el-icon-refresh"},on:{click:e.handleRefresh}},[e._v("刷新列表")])],1),n("div",{staticClass:"basic-component__list flex flex-wrap"},e._l(e.list,(function(t){return n("div",{key:t.id,staticClass:"basic-component__item",on:{click:function(n){return e.handleClick(t)}}},[n("div",{staticClass:"basic-component__cover"},[n("img",{attrs:{src:t.cover,width:"100%",alt:""}})]),n("p",{staticClass:"mt5"},[e._v(e._s(t.name))])])})),0)])},Xt=[];function Yt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Zt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yt(Object(n),!0).forEach((function(t){Object(f["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var en={components:{},setup:function(){var e=Object(o["ref"])([]);bt["a"].get("component/list",{type:"basic"}).then((function(t){e.value=t.data}));var t=function(){bt["a"].post("component/update",{type:"basic"}).then((function(t){e.value=t.data}))},n=function(e){Object(G["a"])()&&(Object(G["c"])(Zt({},e,{nodeType:1})),Object(g["a"])([g["c"].nodeTree,"",g["c"].nodeProperty]),Ge["d"].componentDownload.push(e))};return{list:e,handleClick:n,handleRefresh:t}}},tn=en,nn=(n("ab86"),Object(x["a"])(tn,Wt,Xt,!1,null,null,null)),an=nn.exports,rn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app__box-center absolute z2"},[n("div",{staticClass:"app__mobile"},[n("div",{staticClass:"app__mobile-header relative bb bd-eee"},[n("img",{attrs:{src:"http://file.iming.work/85bcf0d2af175231da45.png",width:"100%",alt:""}}),n("span",{staticClass:"absolute l0 b0 width-100 pb10 tc f16"},[e._v(" "+e._s(e.currentPage?e.currentPage.title||"请输入标题":"未创建页面")+" ")]),e.currentPage?n("el-button",{staticClass:"absolute r10 b0 pb10",attrs:{type:"text"},on:{click:e.handleMode}},[e._v(" "+e._s(e.isEdit()?"预览模式":"编辑模式")+" ")]):e._e()],1),n("div",{staticClass:"app__mobile-webview relative"},[n("div",{staticClass:"app__mobile-webview-mock"},[n("render",{attrs:{project:e.project,currentPage:e.currentPage}})],1)])])])},on=[],cn=n("480f"),ln=Object(o["createComponent"])({components:{Render:cn["a"]},setup:function(){var e=function(){Object(ct["a"])()?Object(ct["c"])():Object(ct["b"])()};return{currentPage:H["b"],isEdit:ct["a"],handleMode:e}}}),sn=ln,un=(n("0539"),Object(x["a"])(sn,rn,on,!1,null,null,null)),pn=un.exports,dn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.areaHeight>0&&e.canMount?n("div",{staticClass:"code-editor",style:{height:e.areaHeight+"px"}},[e.isEdit?[n("div",{staticClass:"code-editor__title h30 flex-center-between plr10 c-aaa bg-333"},[n("span",[e._v("编辑"+e._s(e.currentCode.title))]),n("div",[n("el-button",{attrs:{type:"text"},on:{click:e.handleConfirm}},[e._v("保存")]),n("el-button",{attrs:{type:"text"},on:{click:e.handleCancel}},[e._v("关闭")])],1)]),n("monaco-editor",{style:{height:e.areaHeight-30+"px"},attrs:{amdRequire:e.amdRequire,value:e.code,language:"javascript",theme:"vs-dark"},on:{change:e.handleCodeChange}})]:n("div",{staticClass:"flex-center p30"},[n("p",{staticClass:"c-999"},[e._v("请选择要编辑的代码片段")])])],2):e._e()},fn=[],bn=Object(o["createComponent"])({setup:function(){var e=Object(o["ref"])(0),t=Object(o["ref"])(""),n=Object(o["ref"])(!0),a=Object(o["ref"])(!1);Object(o["watch"])((function(){return g["b"].tab4}),(function(e){e===g["c"].codeEdit&&(a.value=!0)})),Object(o["watch"])((function(){return m.code}),(function(e){t.value=e})),Object(o["onMounted"])((function(){e.value=Object(b["c"])()-105}));var r=function(){h(!1),Object(g["a"])(["","","",g["c"].previewArea])};return{isEdit:v,areaHeight:e,canMount:a,code:t,currentCode:m,amdRequire:window.require,handleCancel:r,handleConfirm:function(){var e=Object(B["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n.value){e.next=3;break}return e.next=3,d["MessageBox"].confirm("代码存在语法错误，不会保存错误的代码，是否继续？");case 3:m.update(t.value),d["Message"].success("保存成功"),r();case 6:case"end":return e.stop()}}),e)})));function a(){return e.apply(this,arguments)}return a}(),handleCodeChange:function(e){var a=Object(b["f"])(e),r=a.ok;a.msg;n.value=r,r&&(t.value=e)}}}}),vn=bn,hn=Object(x["a"])(vn,dn,fn,!1,null,null,null),mn=hn.exports,yn=n("3400"),gn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"component-library"},[n("p",{staticClass:"c-666 mb10"},[e._v("1. 勾选需要使用的组件")]),n("el-tree",{attrs:{data:e.data,"show-checkbox":"","check-strictly":!0,"check-on-click-node":"","default-checked-keys":e.defaultCheck,props:{disabled:e.handleDisabled},"node-key":"id"},on:{"check-change":e.handleCheck}}),n("p",{staticClass:"c-666 mtb10"},[e._v("2. 点击已勾选的组件添加到页面中")]),n("div",{staticClass:"basic-component__list flex flex-wrap"},[e._l(Object.keys(e.checkData),(function(t){return e._l(e.checkData[t],(function(a){return n("div",{key:t+a,staticClass:"basic-component__item",on:{click:function(n){return e.handleAdd(t,a)}}},[n("p",[e._v(e._s(t)+"/"+e._s(a))])])}))}))],2)],1)},On=[];function jn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function wn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jn(Object(n),!0).forEach((function(t){Object(f["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Cn=[{label:"vant",children:["VanButton","VanField","VanCell","VanIcon","VanImage","VanStyle","VanCalendar","VanCheckbox","VanDatetimePicker","VanPicker","VanSearch","VanSwitch","VanUploader","VanActionSheet","VanDropdownMenu","VanSwipeCell","VanCollapse","VanCountDown","VanDivider","VanImagePreview","VanList","VanNoticeBar","VanProgress","VanSkeleton","VanSwipe","VanGrid","VanTabs","VanTabbar"]}],xn=function(){return Cn.map((function(e){return wn({},e,{children:e.children.map((function(t){return{label:t,library:e.label,id:"".concat(e.label,"-").concat(t)}}))})}))};function _n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function kn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_n(Object(n),!0).forEach((function(t){Object(f["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_n(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Pn=Object(o["defineComponent"])({setup:function(){var e=Object(o["ref"])({});Object(o["watch"])((function(){return Ge["d"].componentLibrary}),(function(t){e.value=kn({},t)}));var t=Object(o["computed"])((function(){var t=[];return Object.keys(e.value).forEach((function(n){e.value[n].forEach((function(e){t.push("".concat(n,"-").concat(e))}))})),t})),n=function(t,n){if(e.value[t.library]||p.a.set(e.value,t.library,[]),n)e.value[t.library].push(t.label);else{var a=e.value[t.library].findIndex((function(e){return e===t.label}));e.value[t.library].splice(a,1)}Object(Ge["e"])({componentLibrary:e.value})},a=function(e,t){return 1===t.level},r=function(e,t){Object(G["a"])()&&(Object(G["c"])({library:e,name:t,nodeType:4,type:"div"}),Object(g["a"])([g["c"].nodeTree,"",g["c"].nodeProperty]))};return{defaultCheck:t,checkData:e,data:xn(),handleCheck:n,handleDisabled:a,handleAdd:r}}}),Dn=Pn,En=Object(x["a"])(Dn,gn,On,!1,null,null,null),Sn=En.exports,$n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"basic-component"},[n("div",[n("el-button",{attrs:{type:"text",icon:"el-icon-refresh"},on:{click:e.handleRefresh}},[e._v("刷新列表")])],1),n("div",{staticClass:"basic-component__list flex flex-wrap"},e._l(e.list,(function(t){return n("div",{key:t.id,staticClass:"basic-component__item",on:{click:function(n){return e.handleClick(t)}}},[n("div",{staticClass:"basic-component__cover"},[n("img",{attrs:{src:t.cover,width:"100%",alt:""}})]),n("p",{staticClass:"mt5"},[e._v(e._s(t.name))])])})),0)])},Nn=[],In={components:{},setup:function(){var e=Object(o["ref"])([]);bt["a"].get("component/list",{type:"compose"}).then((function(t){e.value=t.data}));var t=function(){bt["a"].post("component/update",{type:"compose"}).then((function(t){e.value=t.data}))},n=function(){var e=Object(B["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!Object(G["a"])()){e.next=4;break}return e.next=3,Object(Ge["a"])(t.componentDeps);case 3:Object(G["b"])(t.node);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{list:e,handleClick:n,handleRefresh:t}}},Mn=In,An=Object(x["a"])(Mn,$n,Nn,!1,null,null,null),Bn=An.exports,Rn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"component-upload"},[n("div",{staticClass:"flex-center-between"},[n("el-button",{attrs:{icon:"el-icon-download",type:"text"},on:{click:e.handleTemplate}},[e._v(" 下载自定义组件模版 ")]),n("el-upload",{staticClass:"upload-demo",attrs:{action:e.server+"/butterfly/upload",multiple:!1,"show-file-list":!1,"before-upload":e.handleBeforeUpload,"on-success":e.handleSuccess}},[n("el-button",{attrs:{icon:"el-icon-upload",type:"text"}},[e._v("上传组件 zip 包")]),e._e()],1)],1),n("div",{staticClass:"basic-component__list flex flex-wrap"},e._l(e.list,(function(t){return n("div",{key:t.id,staticClass:"basic-component__item relative",on:{click:function(n){return e.handleClick(t)}}},[e._e(),n("div",{staticClass:"cp absolute r10 t0",on:{click:function(n){return n.stopPropagation(),e.downloadItem(t)}}},[n("i",{staticClass:"el-icon-download"})]),n("p",{staticClass:"mt5"},[e._v(e._s(t.name))])])})),0)])},Fn=[];function Vn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function zn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vn(Object(n),!0).forEach((function(t){Object(f["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Tn=Object(o["defineComponent"])({name:"index",setup:function(){var e,t=Object(o["ref"])([]),n=function(){bt["a"].get("component/list",{type:"upload"}).then((function(e){t.value=e.data}))};n();var a=function(t){var n="application/zip"===t.type;return n&&(e=d["Loading"].service({text:"上传编译中..."})),n},r=function(t,a,r){e&&(e.close(),e=null),t.success?(d["Message"].success("上传成功！"),n()):d["Message"].error(t.msg)},i=function(e){Object(G["a"])()&&(Object(G["c"])(zn({},e,{nodeType:1})),Object(g["a"])([g["c"].nodeTree,"",g["c"].nodeProperty]),Ge["d"].componentDownload.push(e))},c=function(){var e=Object(B["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d["MessageBox"].confirm("确定要下载组件 zip 包吗");case 2:location.href="".concat(bt["a"].options.baseUrl,"/butterfly/component/download/upload?name=").concat(t.name);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){window.open("https://github.com/visualization-page/custom-component-template.git")};return{list:t,server:"http://api.jituancaiyun.net",handleBeforeUpload:a,handleSuccess:r,handleClick:i,downloadItem:c,handleTemplate:l}}}),Un=Tn,Ln=(n("5f58"),Object(x["a"])(Un,Rn,Fn,!1,null,null,null)),qn=Ln.exports,Kn=Object(o["defineComponent"])({components:{ProjectSet:Xe,PageList:at,PageSet:pt,NodeProperty:Qt,BasicComponent:an,NodeTree:yt,MobileRender:pn,NodeStyle:Dt,NodeStyleTools:Bt,CodeEditor:mn,HeaderOpt:yn["a"],ComponentLibrary:Sn,ComponentCompose:Bn,ComponentUpload:qn},setup:function(e,t){var n=t.root.$route.params.dir;return n?bt["a"].get("project/get",{dir:n}).then((function(e){Object(Ge["c"])(e.data.project)})):Object(Ge["c"])().then((function(e){e&&d["Message"].success("已从本地导入草稿")})),{tabCurrent:g["b"],tabName:g["c"],handleClick:function(e){Object(g["a"])(e)}}}}),Hn=Kn,Gn=Object(x["a"])(Hn,a,r,!1,null,null,null);t["default"]=Gn.exports}}]);
//# sourceMappingURL=editor.0d6ea9d9.js.map