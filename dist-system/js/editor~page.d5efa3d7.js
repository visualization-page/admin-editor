(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["editor~page"],{"06c5":function(e,t,n){"use strict";var o=n("830b"),r=n.n(o);r.a},1490:function(e,t,n){"use strict";var o=n("3554"),r=n.n(o);r.a},3554:function(e,t,n){},"480f":function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.currentPage?n("div",{class:["render-page",e.currentPage.className]},[n("render-item",{attrs:{nodes:e.currentPage.nodes,"page-config":e.pageConfig,"global-config":e.globalConfig}})],1):e._e()},r=[],c=(n("4de4"),n("159b"),n("96cf"),n("1da1")),i=n("8165"),a=n("7577"),u=(n("a4d3"),n("99af"),n("d81d"),n("fb6a"),n("b0c0"),n("e439"),n("dbb4"),n("b64b"),n("ade3")),s=n("53ca"),l=n("a7a1"),f=n("c951"),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"resize",style:e.outDocFlow&&{cursor:"move"},on:{mousedown:function(t){return e.handleResizeDown(t,"move")},contextmenu:function(t){return t.preventDefault(),function(t){return e.$emit("context",t)}(t)}}},[e.outDocFlow?n("div",{staticClass:"resize__dot resize__dot-lt",on:{mousedown:function(t){return t.stopPropagation(),function(t){return e.handleResizeDown(t,"left-top")}(t)}}}):e._e(),e.outDocFlow?n("div",{staticClass:"resize__dot resize__dot-t",on:{mousedown:function(t){return t.stopPropagation(),function(t){return e.handleResizeDown(t,"top")}(t)}}}):e._e(),e.outDocFlow?n("div",{staticClass:"resize__dot resize__dot-tr",on:{mousedown:function(t){return t.stopPropagation(),function(t){return e.handleResizeDown(t,"top-right")}(t)}}}):e._e(),e.outDocFlow?n("div",{staticClass:"resize__dot resize__dot-lb",on:{mousedown:function(t){return t.stopPropagation(),function(t){return e.handleResizeDown(t,"left-bottom")}(t)}}}):e._e(),n("div",{staticClass:"resize__dot resize__dot-b",on:{mousedown:function(t){return t.stopPropagation(),function(t){return e.handleResizeDown(t,"bottom")}(t)}}}),e.outDocFlow?n("div",{staticClass:"resize__dot resize__dot-br",on:{mousedown:function(t){return t.stopPropagation(),function(t){return e.handleResizeDown(t,"bottom-right")}(t)}}}):e._e(),e.outDocFlow?n("div",{staticClass:"resize__dot resize__dot-l",on:{mousedown:function(t){return t.stopPropagation(),function(t){return e.handleResizeDown(t,"left")}(t)}}}):e._e(),n("div",{staticClass:"resize__dot resize__dot-r",on:{mousedown:function(t){return t.stopPropagation(),function(t){return e.handleResizeDown(t,"right")}(t)}}})])},d=[],b=(n("a9e3"),Object(i["reactive"])({startX:0,startY:0,width:{},height:{},left:{},top:{},dragging:!1,dir:""})),v=function(e){if(b.dragging){var t=l["d"].value,n=function(t){var n=Number(b.height.value)+(e.pageY-b.startY)*t;n>=0&&n<=480&&Object(l["j"])({height:"".concat(n,"px")})},o=function(t){var n=Number(b.width.value)+(e.pageX-b.startX)*t;n>=0&&n<=320&&Object(l["j"])({width:"".concat(n,"px")})},r=function(){Object(l["i"])("left","".concat(Number(b.left.value||0)+e.pageX-b.startX,"px"))},c=function(){Object(l["i"])("top","".concat(Number(b.top.value||0)+e.pageY-b.startY,"px"))};"bottom"===b.dir?n(1):"right"===b.dir?o(1):t.outDocFlow&&("left"===b.dir?(r(),o(-1)):"top"===b.dir?(c(),n(-1)):"top-right"===b.dir?(c(),o(1),n(-1)):"bottom-right"===b.dir?(o(1),n(1)):"left-top"===b.dir?(c(),r(),o(-1),n(-1)):"left-bottom"===b.dir?(r(),o(-1),n(1)):"move"===b.dir&&(c(),r()))}};function g(e,t){var n=Object(a["e"])(e);return"%"===n.unit&&(n.unit="px",n.value=String(("horizontal"===t?320:480)*Number(n.value||0)/100)),n}document.addEventListener("mousemove",v),document.addEventListener("mouseup",(function(e){b.dragging=!1}));var O=Object(i["defineComponent"])({setup:function(){var e=function(e,t){var n=l["d"].value;b.startX=e.pageX,b.startY=e.pageY,b.dragging=!0,b.dir=t,b.width=g(n.style.width,"horizontal"),b.height=g(n.style.height,"vertical"),b.left=g(n.style.position.left,"horizontal"),b.top=g(n.style.position.top,"vertical")};return{handleResizeDown:e,outDocFlow:Object(i["computed"])((function(){return l["d"].value&&l["d"].value.outDocFlow}))}}}),m=O,j=(n("f25e"),n("2877")),h=Object(j["a"])(m,p,d,!1,null,null,null),w=h.exports,_=Object(i["reactive"])({top:0,left:0,show:!1});function y(e){var t=document.querySelector(".app__mobile-webview").getBoundingClientRect(),n=t.top,o=t.left;_.top=e.pageY-n,_.left=e.pageX-o,_.show=!0}document.addEventListener("click",(function(){_.show=!1}));var E,P,D=n("6a83"),C=Object(i["createComponent"])({props:{item:Object,active:Boolean},setup:function(e,t){var n=function(t){t.stopPropagation(),_.show=!1,Object(l["h"])(e.item),Object(D["a"])(["","",D["c"].nodeProperty])},o=function(e){e.preventDefault(),n(e),y(e)};return function(){return Object(i["createElement"])("div",{class:"edit-wrap",on:{click:n,context:o,contextmenu:o}},[e.active&&Object(i["createElement"])(w,{props:{item:e.item}}),t.slots.default&&t.slots.default()])}}}),x=C,z=(n("f08b"),Object(j["a"])(x,E,P,!1,null,null,null)),N=z.exports,I=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"context-menu",style:{left:e.left+"px",top:e.top+"px"}},[n("div",{staticClass:"context-menu__item",on:{click:e.handleDel}},[e._v("删除")]),e.outDocFlow?[n("div",{staticClass:"context-menu__item"},[e._v("上移一层")]),n("div",{staticClass:"context-menu__item"},[e._v("下移一层")]),n("div",{staticClass:"context-menu__item"},[e._v("置顶")]),n("div",{staticClass:"context-menu__item"},[e._v("置底")])]:e._e()],2)},R=[];function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){Object(u["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=Object(i["createComponent"])({setup:function(){return F({},Object(i["toRefs"])(_),{outDocFlow:Object(i["computed"])((function(){return l["d"].value&&l["d"].value.outDocFlow})),handleDel:function(){Object(l["f"])({nodeId:l["d"].value.id})}})}}),S=A,T=(n("1490"),Object(j["a"])(S,I,R,!1,null,null,null)),$=T.exports,X=n("11dc");function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){Object(u["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var L,U,V=function(e,t,n){if("object"===Object(s["a"])(t)){if("position"===n)Object.assign(e,t);else{var o={};Object.keys(t).forEach((function(e){o["".concat(n).concat(e[0].toUpperCase()).concat(e.slice(1))]=t[e]})),Object.assign(e,o)}delete e[n]}},G=Object(i["defineComponent"])({name:"RenderItem",props:{nodes:Array,pageConfig:Object,globalConfig:Object},setup:function(e){var t=function t(n,o,r){var c={$$global:r,$$page:o},u=Object(f["a"])();return n.filter((function(e){var t=!0;if(e.vIf){var n=Object(X["a"])({vIf:e.vIf},c);t=!!n.vIf}return e.show&&t})).map((function(n){var o=4===n.nodeType,r=l["d"].value&&l["d"].value.id===n.id,s={},f={};n.events.forEach((function(e){var t=function(){return Object(X["b"])(e,c)};"click"===e.eventType?f[e.eventType]=t:s[e.eventType]=t}));var p={style:M({},n.style,{borderRadius:"0px"===n.style.borderRadius?void 0:n.style.borderRadius}),class:["render-item__item",n.className,{active:r}],key:n.id,on:s,nativeOn:f,props:Object(X["a"])(n.props,c)};V(p.style,n.style.margin,"margin"),V(p.style,n.style.padding,"padding"),n.outDocFlow&&n.style.position&&V(p.style,n.style.position,"position"),p.style.position=n.outDocFlow?n.style.positionType:void 0;var d="div"===n.type?t(n.children,e.pageConfig,e.globalConfig):[],b=function(){if(u){if(o){var e=Object(a["f"])(n.renderString,c),t=e.ok,r=e.value;if(t&&r)return Object(i["createElement"])(n.name,M({},r.option||{},{class:["height-100",n.className]}),r.children.concat(d))}return Object(i["createElement"])(n.componentName,{props:p.props,class:["width-100 height-100"]},d)}if(o){var s=Object(a["f"])(n.renderString,c),l=s.ok,f=s.value;if(l&&f)return Object(i["createElement"])(n.name,M({},p,{},f.option||{}),f.children.concat(d))}return Object(i["createElement"])(n.componentName,p,d)};return u?Object(i["createElement"])("div",{style:p.style,class:[p.class,{dib:o}],key:p.key},[Object(i["createElement"])(N,{props:{item:n,active:r}},[b()])]):b()}))};return function(){return Object(i["createElement"])("div",{class:"render-item",attrs:{}},t(e.nodes,e.pageConfig,e.globalConfig).concat(Object(i["createElement"])($)))}}}),B=G,J=(n("06c5"),Object(j["a"])(B,L,U,!1,null,null,null)),q=J.exports,H=Object(i["createComponent"])({components:{RenderItem:q},props:{currentPage:{type:Object},project:{type:Object}},setup:function(e){var t=Object(i["ref"])(Object(X["c"])(e.currentPage)),n=Object(i["ref"])({state:{}}),o=Object(i["ref"])(!1),r=function(){return{$$page:n.value,$$global:t.value}};return Object(i["watch"])((function(){return e.project&&e.project.httpOptions}),(function(e){e&&t.value.initHttp(e,r())}),{deep:!0}),Object(i["watch"])((function(){return e.project&&e.project.constant}),(function(e){if(e){var n=Object(a["f"])(e),o=n.ok,r=n.value;o&&(t.value.constant=r)}}),{deep:!0}),Object(i["watch"])((function(){return e.currentPage}),function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(n,c){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!n){e.next=11;break}if(!Object(f["a"])()){e.next=5;break}t.value.updatePage(n),e.next=11;break;case 5:return i=r(),c&&c.events.filter((function(e){return"onUnMounted"===e.eventType})).forEach((function(e){Object(X["b"])(e,i)})),e.next=9,Object(a["g"])((function(){return o.value}));case 9:t.value.updatePage(n),n.events.filter((function(e){return"onMounted"===e.eventType})).forEach((function(e){Object(X["b"])(e,i)}));case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Object(i["watch"])((function(){return e.currentPage&&e.currentPage.state}),(function(e){var t=Object(a["f"])(e),o=t.ok,r=t.value;o&&(n.value.state=r)}),{deep:!0}),Object(i["onMounted"])((function(){o.value=!0})),{pageConfig:n,globalConfig:t}}}),K=H,Q=Object(j["a"])(K,o,r,!1,null,null,null);t["a"]=Q.exports},"4cdb":function(e,t,n){},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,n){var o=n("1d80"),r=n("5899"),c="["+r+"]",i=RegExp("^"+c+c+"*"),a=RegExp(c+c+"*$"),u=function(e){return function(t){var n=String(o(t));return 1&e&&(n=n.replace(i,"")),2&e&&(n=n.replace(a,"")),n}};e.exports={start:u(1),end:u(2),trim:u(3)}},7156:function(e,t,n){var o=n("861d"),r=n("d2bb");e.exports=function(e,t,n){var c,i;return r&&"function"==typeof(c=t.constructor)&&c!==n&&o(i=c.prototype)&&i!==n.prototype&&r(e,i),e}},"7db0":function(e,t,n){"use strict";var o=n("23e7"),r=n("b727").find,c=n("44d2"),i="find",a=!0;i in[]&&Array(1)[i]((function(){a=!1})),o({target:"Array",proto:!0,forced:a},{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),c(i)},"7f11":function(e,t,n){},"830b":function(e,t,n){},a9e3:function(e,t,n){"use strict";var o=n("83ab"),r=n("da84"),c=n("94ca"),i=n("6eeb"),a=n("5135"),u=n("c6b6"),s=n("7156"),l=n("c04e"),f=n("d039"),p=n("7c73"),d=n("241c").f,b=n("06cf").f,v=n("9bf2").f,g=n("58a8").trim,O="Number",m=r[O],j=m.prototype,h=u(p(j))==O,w=function(e){var t,n,o,r,c,i,a,u,s=l(e,!1);if("string"==typeof s&&s.length>2)if(s=g(s),t=s.charCodeAt(0),43===t||45===t){if(n=s.charCodeAt(2),88===n||120===n)return NaN}else if(48===t){switch(s.charCodeAt(1)){case 66:case 98:o=2,r=49;break;case 79:case 111:o=8,r=55;break;default:return+s}for(c=s.slice(2),i=c.length,a=0;a<i;a++)if(u=c.charCodeAt(a),u<48||u>r)return NaN;return parseInt(c,o)}return+s};if(c(O,!m(" 0o1")||!m("0b1")||m("+0x1"))){for(var _,y=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof y&&(h?f((function(){j.valueOf.call(n)})):u(n)!=O)?s(new m(w(t)),n,y):w(t)},E=o?d(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),P=0;E.length>P;P++)a(m,_=E[P])&&!a(y,_)&&v(y,_,b(m,_));y.prototype=j,j.constructor=y,i(r,O,y)}},f08b:function(e,t,n){"use strict";var o=n("7f11"),r=n.n(o);r.a},f25e:function(e,t,n){"use strict";var o=n("4cdb"),r=n.n(o);r.a}}]);
//# sourceMappingURL=editor~page.d5efa3d7.js.map